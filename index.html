
<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Malla de Ingenier칤a Sanitaria</title>
    <script src="https://cdn.jsdelivr.net/npm/jsplumb@2.15.6/dist/js/jsplumb.min.js"></script>
    <style>
        body {
            font-family: Arial, sans-serif;
            background: linear-gradient(to right, #e8f5e9, #e3f2fd);
            margin: 0;
            padding: 20px;
        }
        h1 {
            text-align: center;
            color: #1b5e20;
        }
        #resetBtn {
            display: block;
            margin: 0 auto 20px auto;
            padding: 10px 20px;
            background-color: #4caf50;
            border: none;
            color: white;
            border-radius: 10px;
            cursor: pointer;
        }
        #container {
            display: grid;
            grid-template-columns: repeat(10, 1fr);
            gap: 20px;
        }
        .ciclo {
            border: 2px solid #81c784;
            background-color: #c8e6c9;
            border-radius: 12px;
            padding: 10px;
            min-width: 180px;
        }
        .ciclo h2 {
            text-align: center;
            font-size: 1.1rem;
            color: #2e7d32;
        }
        .ramo {
            background-color: #bbdefb;
            border: 2px solid #64b5f6;
            border-radius: 8px;
            padding: 5px;
            margin: 5px 0;
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
        }
        .ramo:hover {
            transform: scale(1.03);
            box-shadow: 0 0 10px rgba(33, 150, 243, 0.4);
        }
        .ramo.aprobado {
            text-decoration: line-through;
            background-color: #a5d6a7;
            color: #1b5e20;
        }
        .ramo:disabled {
            background-color: #e0e0e0;
            color: #9e9e9e;
            cursor: not-allowed;
        }
    </style>
</head>
<body>
    <h1>Malla Curricular - Ingenier칤a Sanitaria</h1>
    <button id="resetBtn">游댃 Reiniciar progreso</button>
    <div id="container"></div>

    <script>
        const ramos = [{"id": "BRN01", "nombre": "Redacci칩n y comunicaci칩n", "ciclo": 1, "requisitos": []}, {"id": "BQU01", "nombre": "Qu칤mica I", "ciclo": 1, "requisitos": []}, {"id": "BMA03", "nombre": "츼lgebra Lineal", "ciclo": 1, "requisitos": []}, {"id": "BMA01", "nombre": "C치lculo Diferencial", "ciclo": 1, "requisitos": []}, {"id": "BIC01", "nombre": "Introducci칩n a la computaci칩n", "ciclo": 1, "requisitos": []}, {"id": "AA215G", "nombre": "Geolog칤a", "ciclo": 1, "requisitos": []}, {"id": "SA312", "nombre": "Ecolog칤a", "ciclo": 2, "requisitos": ["BQU01"]}, {"id": "SA401", "nombre": "Qu칤mica Sanitaria", "ciclo": 2, "requisitos": ["BQU01"]}, {"id": "BMA02", "nombre": "C치lculo Integral", "ciclo": 2, "requisitos": ["BMA01"]}, {"id": "BEG01", "nombre": "Econom칤a General", "ciclo": 2, "requisitos": []}, {"id": "BF101", "nombre": "F칤sica I", "ciclo": 2, "requisitos": []}, {"id": "AA237", "nombre": "Dibujo T칠cnico", "ciclo": 2, "requisitos": []}, {"id": "SA323", "nombre": "Microbiolog칤a Sanitaria I", "ciclo": 3, "requisitos": []}, {"id": "AA243", "nombre": "Fisicoqu칤mica Aplicada", "ciclo": 3, "requisitos": ["BMA02", "SA401"]}, {"id": "AA241", "nombre": "C치lculo Multivariable", "ciclo": 3, "requisitos": ["BMA03", "BMA02"]}, {"id": "AA232", "nombre": "Bioestad칤stica", "ciclo": 3, "requisitos": ["BMA02"]}, {"id": "AA234", "nombre": "F칤sica II", "ciclo": 3, "requisitos": ["BF101"]}, {"id": "BEF01", "nombre": "칄tica y Filosof칤a Pol칤tica", "ciclo": 3, "requisitos": []}, {"id": "SA324", "nombre": "Microbiolog칤a Sanitaria II", "ciclo": 4, "requisitos": ["SA323"]}, {"id": "SA343", "nombre": "Epidemiolog칤a y Salud P칰blica", "ciclo": 4, "requisitos": ["SA323"]}, {"id": "EC115", "nombre": "Mec치nica de Cuerpo R칤gido", "ciclo": 4, "requisitos": ["AA234", "BMA02"]}, {"id": "MA153", "nombre": "Ecuaciones Diferenciales", "ciclo": 4, "requisitos": ["AA241"]}, {"id": "F1413", "nombre": "F칤sica III", "ciclo": 4, "requisitos": ["AA234"]}, {"id": "BRN02", "nombre": "Realidad nacional, Constituci칩n y DDHH", "ciclo": 4, "requisitos": []}, {"id": "SA413", "nombre": "An치lisis de Agua y Desag칲e", "ciclo": 5, "requisitos": ["SA323"]}, {"id": "SA467", "nombre": "Manejo y Trat. de Residuos S칩lidos", "ciclo": 5, "requisitos": ["SA312"]}, {"id": "HH223", "nombre": "Mec치nica de Fluidos I", "ciclo": 5, "requisitos": ["AA241", "EC115"]}, {"id": "EC125", "nombre": "Resistencia de Materiales", "ciclo": 5, "requisitos": ["EC115"]}, {"id": "AA215T", "nombre": "Topograf칤a", "ciclo": 5, "requisitos": ["AA215G", "AA237"]}, {"id": "SA426", "nombre": "Procesos Unitarios I", "ciclo": 6, "requisitos": ["SA323", "SA413"]}, {"id": "SA468", "nombre": "Residuos Hospitalarios y Peligrosos", "ciclo": 6, "requisitos": ["SA467"]}, {"id": "HH224", "nombre": "Mec치nica de Fluidos II", "ciclo": 6, "requisitos": ["HH223"]}, {"id": "HH113", "nombre": "Hidrolog칤a General", "ciclo": 6, "requisitos": ["HH223"]}, {"id": "EC611", "nombre": "Tecnolog칤a de Materiales", "ciclo": 6, "requisitos": ["EC125"]}, {"id": "SA427", "nombre": "Procesos Unitarios II", "ciclo": 7, "requisitos": ["SA426"]}, {"id": "SA416", "nombre": "Saneamiento Rural", "ciclo": 7, "requisitos": ["SA413", "HH224"]}, {"id": "EC411", "nombre": "Dise침o de Estruct. Hidr치ulicas", "ciclo": 7, "requisitos": ["EC125"]}, {"id": "SA227", "nombre": "Aprovechamiento Aguas Subterr치neas", "ciclo": 7, "requisitos": ["HH113"]}, {"id": "EE631", "nombre": "Instalaciones El칠ctricas y Automatizaci칩n", "ciclo": 7, "requisitos": ["F1413"]}, {"id": "SA126", "nombre": "Saneamiento Ambiental", "ciclo": 8, "requisitos": ["SA416"]}, {"id": "SA526", "nombre": "M치quinas y Equipos Sanitarios", "ciclo": 8, "requisitos": ["HH223"]}, {"id": "SA215", "nombre": "Abastecimiento de Agua I", "ciclo": 8, "requisitos": ["HH224", "SA227"]}, {"id": "SA516", "nombre": "Instalaciones Sanitarias en Edificaciones", "ciclo": 8, "requisitos": ["HH224"]}, {"id": "EC717", "nombre": "Procedimiento de Construcci칩n", "ciclo": 8, "requisitos": ["EC611"]}, {"id": "SA465", "nombre": "Tratamiento de Desag칲es", "ciclo": 9, "requisitos": ["SA427"]}, {"id": "SA245", "nombre": "Alcantarillado y Drenaje Pluvial", "ciclo": 9, "requisitos": ["SA416"]}, {"id": "SA445", "nombre": "Tratamiento de Agua I", "ciclo": 9, "requisitos": ["SA215"]}, {"id": "SA216", "nombre": "Abastecimiento de Agua II", "ciclo": 9, "requisitos": ["SA215"]}, {"id": "SA517", "nombre": "Instalaciones Sanitarias Especiales", "ciclo": 9, "requisitos": ["SA516"]}, {"id": "SA475", "nombre": "Tratamiento Avanzado de Aguas Residuales", "ciclo": 10, "requisitos": ["SA465"]}, {"id": "SA446", "nombre": "Tratamiento de Agua II", "ciclo": 10, "requisitos": ["SA445"]}, {"id": "GA163", "nombre": "Innovaci칩n y Tesis I", "ciclo": 10, "requisitos": ["SA445", "SA465"]}, {"id": "SA921", "nombre": "Evaluaci칩n del Impacto Ambiental", "ciclo": 10, "requisitos": ["SA245", "SA216"]}, {"id": "SA235", "nombre": "An치lisis de Redes y Fuentes de Agua", "ciclo": 10, "requisitos": ["SA216", "BIC01"]}];
        const container = document.getElementById('container');

        const aprobados = new Set(JSON.parse(localStorage.getItem("aprobados") || "[]"));

        function render() {
            container.innerHTML = '';
            for (let i = 1; i <= 10; i++) {
                const cicloDiv = document.createElement("div");
                cicloDiv.className = "ciclo";
                cicloDiv.innerHTML = "<h2>Ciclo " + i + "</h2>";
                ramos.filter(r => r.ciclo === i).forEach(ramo => {
                    const btn = document.createElement("button");
                    btn.textContent = ramo.nombre;
                    btn.className = "ramo";
                    btn.id = ramo.id;
                    const puede = ramo.requisitos.every(req => aprobados.has(req));
                    if (!puede && !aprobados.has(ramo.id)) {
                        btn.disabled = true;
                    }
                    if (aprobados.has(ramo.id)) {
                        btn.classList.add("aprobado");
                    }
                    btn.onclick = () => {
                        if (aprobados.has(ramo.id)) {
                            aprobados.delete(ramo.id);
                        } else {
                            aprobados.add(ramo.id);
                            btn.animate([{transform: "scale(1)"}, {transform: "scale(1.15)"}, {transform: "scale(1)"}], {
                                duration: 300
                            });
                        }
                        localStorage.setItem("aprobados", JSON.stringify([...aprobados]));
                        render();
                    };
                    cicloDiv.appendChild(btn);
                });
                container.appendChild(cicloDiv);
            }
        }

        document.getElementById("resetBtn").onclick = () => {
            localStorage.removeItem("aprobados");
            aprobados.clear();
            render();
        };

        render();
    </script>
</body>
</html>
